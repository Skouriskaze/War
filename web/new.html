<!DOCTYPE html>
<html>
<head
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Haha! AJAX!</title>
</head>
<body>

<p id="text"> </p>
<textarea name="search" id="search" rows="1" cols="20"></textarea>
<button type="button" onclick="loadSearch()">Change Content </button>
<script>
function loadDoc(str) {
    var xhttp;
    if (window.XMLHttpRequest) {
        //Code for modern browsers
        xhttp = new XMLHttpRequest();
    } else {
        //Old browsers
        xhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }

    xhttp.onreadystatechange = function() {
        if (xhttp.readyState == 4 && xhttp.status == 200) {
            document.getElementById("text").innerHTML = xhttp.responseText;
        }
    };

    xhttp.open("POST", "query.php", true);
    xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xhttp.send("search="+str);
}

function loadSearch() {
    loadDoc(document.getElementById('search').value);
    setInterval(function() {
        loadDoc(document.getElementById('search').value);
    }, 3000);
}

</script>
</body>
</html>

